<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>u3e04_discos_David_Palomero</title>
</head>

<body>
    <script>
        var nom = prompt("Introduca el nombre");
        var gen = prompt("Introduca el grupo");
        var año = prompt("Introduca el año");
        var tip = prompt("Introduca el genero musical");

        if (tip != "rock" && tip != "pop" && tip != "punk" && tip != "indie") {
            tip = "";
        }
        var loc = prompt("Introduca el numero de la estanteria");

        var disco = new Disco(nom, gen, año, tip, loc);
        do {
            var salir = true;
            do {
                var opcion = prompt(
                    "1. Mostrar la información del disco\n" +
                    "2. Cambiar el disco de estantería\n" +
                    "3. Prestar un disco\n" +
                    "4. Devolver un disco\n" +
                    "5. Terminar"
                ).trim().charAt(0);

            } while (opcion != 1 && opcion != 2 && opcion != 3 && opcion != 4 && opcion != 5);

            switch (opcion) {
                case "1":
                    alert(disco.mostrar());
                    break;
                case "2":
                    disco.setLocalizacion(
                        prompt("Introduzca la localizacion nueva")
                    );
                    break;
                case "3":
                    alert(disco.prestar(opcion));
                    break;
                case "4":
                    alert(disco.prestar(opcion));
                    break;
                case "5":
                    salir = false;
                    break;
            }
        } while (salir);


        function Disco(n, g, a, t, l = 0) {
            this.nombre = n || "";
            this.grupo = g || "";
            this.año = a || "";
            this.tipo = t;
            this.loc = l;
            this.prestado = false;

            this.setLocalizacion = function (l) {
                this.loc = l;
            }
            this.prestar = function (n) {
                var p = "";
                if (n == 3) {
                    if (this.prestado) {
                        p = "El disco ya esta prestado";
                    } else {
                        p = "El disco a sido prestado correctamente";
                        this.prestado = true;
                    }
                    if (n == 4) {
                        if (this.prestado) {
                            p = "El disco se ha devuelto correctamente";
                            this.prestado = false;
                        } else {
                            p = "El disco ya se devolvio";
                        }
                        return p;
                    }
                }
            }

            this.mostrar = function () {
                var c = "INFO DEL DISCO" +
                    "\nNombre: " + this.nombre +
                    "\nGrupo: " + this.grupo +
                    "\nAño: " + this.año +
                    "\nGenero: " + this.tipo +
                    "\nEstanteria: " + this.loc +
                    "\nPrestado: " + (this.prestado ? "No disponible" : "Disponible");
                return c;
            }
        }
    </script>
</body>

</html>